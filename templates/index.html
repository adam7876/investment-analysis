{% extends "base.html" %}

{% block title %}美股投資分析系統{% endblock %}

{% block content %}
<!-- 主標題區域 -->
<div class="text-center mb-5">
    <h1 class="display-4 fw-bold mb-3">
        <i class="fas fa-chart-line text-primary me-3"></i>
        美股投資分析系統
    </h1>
    <p class="lead text-muted">
        運用AI和數據分析，打造您的專業投資決策平台
    </p>
</div>

<!-- 三層架構介紹 -->
<div class="row mb-5">
    <div class="col-md-4 mb-4">
        <div class="card h-100 border-success">
            <div class="card-header bg-success text-white text-center">
                <i class="fas fa-globe fa-2x mb-2"></i>
                <h5 class="mb-0">第一層：總經環境</h5>
            </div>
            <div class="card-body text-center">
                <p class="card-text">
                    分析市場情緒、經濟指標和總體環境，為投資決策
                    提供宏觀視角。
                </p>
                <ul class="list-unstyled text-start">
                    <li><i class="fas fa-check text-success me-2"></i>Fear & Greed Index</li>
                    <li><i class="fas fa-check text-success me-2"></i>聯準會經濟數據</li>
                    <li><i class="fas fa-check text-success me-2"></i>經濟階段識別</li>
                    <li><i class="fas fa-check text-success me-2"></i>智能投資建議</li>
                </ul>
                <div class="mt-3">
                    <span class="badge bg-success fs-6">✅ 已完成</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 border-warning">
            <div class="card-header bg-warning text-white text-center">
                <i class="fas fa-newspaper fa-2x mb-2"></i>
                <h5 class="mb-0">第二層：事件選股</h5>
            </div>
            <div class="card-body text-center">
                <p class="card-text">
                    追蹤財經事件、新聞情緒和產業動態，發掘投資機會
                    和風險。
                </p>
                <ul class="list-unstyled text-start">
                    <li><i class="fas fa-check text-success me-2"></i>財經事件日曆</li>
                    <li><i class="fas fa-check text-success me-2"></i>新聞情緒分析</li>
                    <li><i class="fas fa-check text-success me-2"></i>產業輪動分析</li>
                    <li><i class="fas fa-check text-success me-2"></i>智能選股篩選</li>
                </ul>
                <div class="mt-3">
                    <span class="badge bg-success fs-6">✅ 已完成</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 border-info">
            <div class="card-header bg-info text-white text-center">
                <i class="fas fa-chart-bar fa-2x mb-2"></i>
                <h5 class="mb-0">第三層：技術確認</h5>
            </div>
            <div class="card-body text-center">
                <p class="card-text">
                    結合基本面和技術分析，確認進出場時機和風險管
                    理。
                </p>
                <ul class="list-unstyled text-start">
                    <li><i class="fas fa-clock text-muted me-2"></i>技術指標分析</li>
                    <li><i class="fas fa-clock text-muted me-2"></i>支撐阻力位</li>
                    <li><i class="fas fa-clock text-muted me-2"></i>選擇權策略</li>
                    <li><i class="fas fa-clock text-muted me-2"></i>風險管理</li>
                </ul>
                <div class="mt-3">
                    <span class="badge bg-secondary fs-6">🚧 規劃中</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 快速開始區域 -->
<div class="card mb-5 border-primary">
    <div class="card-header bg-primary text-white">
        <h4 class="mb-0">
            <i class="fas fa-rocket me-2"></i>
            快速開始
        </h4>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h5>🎯 立即體驗</h5>
                <p class="text-muted">
                    點擊下方按鈕開始您的第一次市場分析，系統將自動收集最新的總經數據並提供投資建議。
                </p>
                <div class="d-grid gap-2 d-md-flex">
                    <a href="/dashboard" class="btn btn-primary btn-lg me-md-2">
                        <i class="fas fa-tachometer-alt me-2"></i>前往儀表板
                    </a>
                    <button id="quickAnalysis" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-bolt me-2"></i>快速分析
                    </button>
                </div>
            </div>
            <div class="col-md-6">
                <h5>💡 系統特色</h5>
                <div class="row">
                    <div class="col-6 mb-2">
                        <i class="fas fa-check text-success me-2"></i>實時市場情緒分析
                    </div>
                    <div class="col-6 mb-2">
                        <i class="fas fa-check text-success me-2"></i>聯準會官方經濟數據
                    </div>
                    <div class="col-6 mb-2">
                        <i class="fas fa-check text-success me-2"></i>智能投資建議
                    </div>
                    <div class="col-6 mb-2">
                        <i class="fas fa-check text-success me-2"></i>風險等級評估
                    </div>
                    <div class="col-6 mb-2">
                        <i class="fas fa-check text-success me-2"></i>財經事件追蹤
                    </div>
                    <div class="col-6 mb-2">
                        <i class="fas fa-check text-success me-2"></i>產業輪動分析
                    </div>
                    <div class="col-6 mb-2">
                        <i class="fas fa-check text-success me-2"></i>新聞情緒分析
                    </div>
                    <div class="col-6 mb-2">
                        <i class="fas fa-check text-success me-2"></i>現代化Web介面</i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 系統狀態 -->
<div class="row">
    <div class="col-md-3 mb-3">
        <div class="card text-center border-success">
            <div class="card-body">
                <h2 class="text-success">3</h2>
                <p class="card-text">個活躍來源</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card text-center border-warning">
            <div class="card-body">
                <h2 class="text-warning">2/3</h2>
                <p class="card-text">已完成</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card text-center border-info">
            <div class="card-body">
                <h2 class="text-info">
                    <i class="fas fa-check-circle"></i>
                </h2>
                <p class="card-text">運行正常</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card text-center border-primary">
            <div class="card-body">
                <h2 class="text-primary">30</h2>
                <p class="card-text">分鐘前</p>
            </div>
        </div>
    </div>
</div>

<script>
// 快速分析功能
document.getElementById('quickAnalysis').addEventListener('click', function() {
    const button = this;
    const originalText = button.innerHTML;
    
    // 顯示載入狀態
    button.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>分析中...';
    button.disabled = true;
    
    // 執行第一層分析
    fetch('/api/layer1/collect', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        button.innerHTML = originalText;
        button.disabled = false;
        
        if (data.success) {
            showToast('快速分析完成！正在跳轉到儀表板...', 'success');
            setTimeout(() => {
                window.location.href = '/dashboard';
            }, 1500);
        } else {
            showToast('分析失敗：' + data.message, 'error');
        }
    })
    .catch(error => {
        button.innerHTML = originalText;
        button.disabled = false;
        console.error('Error:', error);
        showToast('網路錯誤，請重試', 'error');
    });
});
</script>
{% endblock %} 