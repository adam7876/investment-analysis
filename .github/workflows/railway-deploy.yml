name: ğŸš€ Railway Auto Deploy

on:
  push:
    branches: [main]
  workflow_dispatch: # å…è¨±æ‰‹å‹•è§¸ç™¼

jobs:
  deploy:
    name: éƒ¨ç½²åˆ°Railway
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ æª¢å‡ºä»£ç¢¼
        uses: actions/checkout@v4
        
      - name: ğŸš‚ å®‰è£Railway CLI
        run: |
          curl -fsSL https://railway.app/install.sh | sh
          echo "$HOME/.railway/bin" >> $GITHUB_PATH
          
      - name: ğŸš€ éƒ¨ç½²åˆ°Railway
        run: |
          railway up --detach
        env:
          RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
          
      - name: âœ… éƒ¨ç½²å®Œæˆé€šçŸ¥
        run: |
          echo "ğŸ‰ éƒ¨ç½²å®Œæˆï¼"
          echo "ğŸ“± ç¶²ç«™åœ°å€: https://web-production-9cc8f.up.railway.app"
          echo "â° éƒ¨ç½²æ™‚é–“: $(date)" 